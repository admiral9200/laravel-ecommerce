<!-- Imports polymer -->
<link rel="import" href="/bower_components/polymer/polymer.html">

<!-- Defines element markup -->
<dom-module id="mage2-grid">

    <style is='custom_style'>
        table{
            border-spacing: 0px;
            width:100%;
        }
        tr td, tr th{
            border-bottom: 1px solid #ccc;
            padding: 6px 28px 6px 28px;
            box-sizing: border-box;
        }
        td{
            height: 48px;
        }
        th{
            font-weight: 500;
            text-align:left;
            white-space: nowrap;
            -webkit-user-select: none;
            -ms-user-select: none;
            -moz-user-select: none;
            user-select: none;
            color: rgba(0,0,0, .54);
            font-size:12px;
            transition: linear .1s color, padding-left .2s linear;
            box-sizing: border-box;
            height: 56px;
        }

    </style>
    <template>
        <table>
            <thead>
                <tr>
                    <template is="dom-repeat" items="{{headers}}"   >
                        <th>{{item.title}}</th>
                    </template>
                        <th>{{ editLinkLabel }}</th>
                        <th>{{ deleteLinkLabel }}</th>
                        
                </tr>
            </thead>
            <tbody>
                
            <template is="dom-repeat" items="{{rows}}" as="row">
                <tr>
                    <template is="dom-repeat" items="{{headers}}" as="header">
                        <td>{{ _rowData(header,row) }}</td>   
                    </template>
                        <td>
                            <a href="{{_getEditLink(row, editLinkUrl)}}">
                                {{ editLinkLabel }}
                            </a>
                        </td>
                        <td>
                            <form  method='post'  action="{{ _getDeleteLink(row, deleteLinkUrl) }}" >
                                <input type="hidden" name="_token" value="{{ token }}" />
                                <input type="hidden" name="_method" value="DELETE" />
                                <button type="submit">
                                   {{ deleteLinkLabel }}
                                </button>
                            </form>
                               
                            
                        </td>
                </tr>
            </template>
            </tbody>


            </tr>
            </thead>

        </table>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'mage2-grid',
        properties: {
            token: String,
            editLinkUrl: String,
            editLinkLabel : String,
            deleteLinkUrl: String,
            deleteLinkLabel : String,
            headers: {
                type: Array
            },
            rows: {
                type: Array
            }
        },
        _getEditLink: function(row,editUrl) {
            return editUrl + "/" + row.id + "/edit";
        },
        _getDeleteLink: function(row, deleteurl) {
            return deleteurl + "/" + row.id;
            // + row.id;
        },
         _rowData: function (header, row) {
            return row[header.tableKey];
        }
    });
</script>